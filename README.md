# Конфигурационное управление


### Домашнее задание 2
#### Условие задания

Разработать инструмент командной строки для визуализации графа
зависимостей, включая транзитивные зависимости. Сторонние средства для
получения зависимостей использовать нельзя.

Зависимости определяются по имени пакета платформы .NET (nupkg). Для
описания графа зависимостей используется представление Mermaid.
Визуализатор должен выводить результат на экран в виде графического
изображения графа.

Ключами командной строки задаются:

• Путь к программе для визуализации графов.

• Имя анализируемого пакета.

• URL-адрес репозитория.


Эта программа представляет собой инструмент для анализа зависимостей пакетов формата .nupkg и визуализации этих зависимостей с помощью графов в формате Mermaid. Она извлекает зависимости из .nupkg-файла и выводит их в текстовом виде, а также генерирует Mermaid-код для создания графов. Программа выполняется из командной строки, и её можно настроить через аргументы командной строки.


### Запуск программы

Программа запускается из командной строки с использованием Python. Команда для запуска выглядит следующим образом:

python script_name.py <graph_tool_path> <package_name> <repo_url>

##### Аргументы командной строки:

- graph_tool_path: путь к программе для визуализации графов.

- package_name: путь к .nupkg-файлу, который нужно проанализировать.

- repo_url: URL-адрес репозитория

### Основные функции

Основные функции
#### extract_nuspec_from_nupkg(nupkg_path)
- Открывает указанный .nupkg файл и ищет в нём .nuspec файл, содержащий метаданные пакета, включая информацию о зависимостях.
  
- Возвращает содержимое .nuspec файла в виде байтов.
  
- Исключения: Если .nuspec файл не найден, выбрасывается ValueError.

#### parse_nuspec_for_dependencies(nuspec_content)

- Принимает на вход содержимое .nuspec файла и разбирает его с помощью XML-парсера.
  
- Извлекает зависимости, которые находятся внутри тегов <dependencies> и <group>, используя XML-путь с учётом пространства имён.
  
- Возвращает список зависимостей в формате словарей, где каждый словарь содержит target_framework, dependency_id, и version.

#### generate_mermaid_code(dependencies)

- Принимает список зависимостей и генерирует Mermaid-код для визуализации зависимостей в виде графа.

- Для каждой зависимости добавляет строку, связывающую целевую платформу с зависимостью и её версией.

#### main()

- Основная функция, которая инициализирует парсер аргументов командной строки, обрабатывает параметры и запускает анализ .nupkg файла.

- Печатает информацию о зависимостях и Mermaid-код для визуализации зависимостей.


### Описание функций


1. extract_nuspec_from_nupkg(nupkg_path):
   - Функция открывает .nupkg файл (NuGet пакет), находит и извлекает из него .nuspec файл, который содержит метаданные о пакете, включая зависимости.

2. parse_nuspec_for_dependencies(nuspec_content):
   - Функция анализирует содержимое .nuspec файла в формате XML, извлекает и возвращает список зависимостей пакета, включая целевую платформу, идентификатор зависимостей и версии.

3. generate_mermaid_code(dependencies):
   - Функция принимает список зависимостей, генерирует и возвращает код в формате Mermaid для визуализации графа зависимостей, который можно использовать в инструментах для визуализации.

4. main():
   - Основная функция программы. Настроена для парсинга командной строки, извлечения информации о пакете, обработки зависимостей и генерации Mermaid графа. В этой функции происходит вызов всех вышеуказанных функций для получения и отображения результатов.

# Пример использования

![image](https://github.com/user-attachments/assets/c26d2599-89cb-49af-ab42-8ffa7a90229a)



![image](https://github.com/user-attachments/assets/1102afd4-6d65-41be-aa1d-db075a66bbfd)



![image](https://github.com/user-attachments/assets/14cad428-78ca-47b5-a1b4-c235910616be)



![image](https://github.com/user-attachments/assets/c3be3de9-0b2a-4e85-8de5-17021c4ea53e)



![image](https://github.com/user-attachments/assets/d93808cc-5241-4ffe-a863-4d391522d35a)



# Тестирование 

Выполним тестирование, используя unittest 



